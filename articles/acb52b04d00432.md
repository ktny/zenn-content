---
title: "「現場で役立つシステム設計原則」を読んだ"
emoji: "✨"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["読書"]
published: false
---

## 小さくまとめる

- 短い名前とメソッド、小さなクラス
    - メソッド抽出してわかりやすく小さい処理にまとめる
- あいまいな基本データではなく、ドメインに沿った具体的な値オブジェクトを作成する
    - 不変にする
    - 入力制限やメソッドをデータに近いところに設けられる
    - わかりやすい名前がコードに表れ、取り違いも起きなくなる
- 配列という複雑性をコードに表出させないため、次のような処理をまとめた専用のコレクションオブジェクトを作成する
    - ループ処理のロジック
    - コレクション要素数、要素内容の変化
    - 0件の場合
    - 要素数の最小/最大制限

## 場合分けのロジックを整理する

- なるべくif文を使わない
    - 区分ごとに別のクラスに分けたりenumを使う方がわかりやすい
    - if文を使う場合、早期リターンやガード節でわかりやすく整理する

## 業務ロジックを整理する

- データとロジックのクラスを分けない
    - 汎用的な共通関数は理解していないメンバーは使えず自作関数がどんどん増えていく
    - クラスにデータとそのデータを使う判断/加工/計算のロジックを一緒に書く
    - データを使う側のクラスにロジックを書き始めたら設計を見直す
    - クラスが肥大化したら小さく分ける
- 三層 + ドメインモデルで整理する
    - プレゼンテーション層: UIなど外部との入出力を受け持つ
    - アプリケーション層: 業務機能のマクロな手順の記述
    - データソース層: DBとの入出力を受け持つ
    - ドメインモデル: 業務データと関連する業務ロジックを表現したドメインオブジェクトの集合
