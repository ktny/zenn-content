---
title: "ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã¾ã¨ã‚"
emoji: "ğŸ•"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: []
published: false
---

# ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³

javaé¢¨ã«ç°¡ç•¥ã—ã¦æ›¸ã„ã¦ã„ã‚‹ã€‚

## Singleton

1ã¤ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ã¿ä½œã‚‰ã‚Œã¦ã„ã‚‹ã¨ã„ã†å˜ä¸€æ€§ã‚’ä¿è¨¼ã™ã‚‹

ä¾‹
- ãƒ‡ãƒ¼ã‚¿ã‚­ãƒ£ãƒƒã‚·ãƒ¥, ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãªã©ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹

```java
public class Singleton {
    // å˜ä¸€æ€§ã‚’ä¿è¨¼ã™ã‚‹ãŸã‚å­ã‚¯ãƒ©ã‚¹ã‹ã‚‰ä½¿ãˆãªã„å®šæ•°ã«ã™ã‚‹
    private static final Singleton singleton = new Singleton();

    private Singleton() {}

    // æ±ºã‚ã‚‰ã‚ŒãŸãƒ¡ã‚½ãƒƒãƒ‰ã‚’çµŒç”±ã—ã¦ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å–å¾—ã™ã‚‹
    public static Singleton getInstance() {
        return singleton;
    }
}
```

## Abstract Factory

æœ€çµ‚çš„ã«ã»ã—ã„ã‚¯ãƒ©ã‚¹ã‚’ç›´æ¥ä½œæˆã™ã‚‹ã®ã§ã¯ãªãFactoryã‹ã‚‰ä½œæˆã™ã‚‹ã“ã¨ã§ã‚¯ãƒ©ã‚¹ä½œæˆãƒ­ã‚¸ãƒƒã‚¯ã‚’æŠ½è±¡çš„ã«éš è”½ã™ã‚‹

```java
Int id = 1;
AbstractFactory factory = AbstractFactory.getFactory(id);
AbstractProduct product = factory.getProduct();
product.method();

abstract class AbstractFactory {
    private Factory getFactory(Int id) {
        switch(id) {
            case 1: return new Factory1();
            case 2: return new Factory2();
            case 3: return new Factory3();
        }
    }
}

class Factory1() extends AbstractFactory {
    private AbstractProduct getProduct() {
        return new Product1();
    }
}

class Product1 extends AbstractProduct {
    private void method() {
        // å‡¦ç†
    }
}
```

### Builder

å…¨ä½“å‡¦ç†æ‰‹é †ã‚’Directorã«ã€å€‹åˆ¥ã®æ§‹ç¯‰å‡¦ç†ã‚’Builderã«å½¹å‰²ã‚’åˆ†å‰²ã™ã‚‹

ä¾‹
- Director: ç”»åƒã‚’ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã«è¡¨ç¤ºã™ã‚‹å‡¦ç†
- Builder: å„ç”»åƒã®å½¢å¼ã«å¿œã˜ãŸè¡¨ç¤ºå‡¦ç†

```java
Object results;
Director director = new Director(ConcreteBuilder1());
result = director.operation();

class Director() {
    private Builder builder;

    Director(Builder builder) {
        this.builder = builder
    }

    private Object operation() {
        builder.op1(1);
        builder.op2(2);
        return builder.result();
    }
}

class ConcreteBuilder1 extends Builder() {
    int p1, p2;

    private void op1(int i) {
        p1 = i;
    }

    private void op2(int i) {
        p2 = i;
    }

    private Object result {
        return abc(p1, p2);
    }
}
```

## Prototype

æ—¢å­˜ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦æ–°ã—ã„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œã‚‹ã€‚  
ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚³ãƒ³ãƒ†ã‚¯ã‚¹ãƒˆãŒç•°ãªã‚‹ã ã‘ã§å‹•ä½œã¯åŒã˜ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’1ã¤1ã¤ä½œã‚‹ã®ã§ã¯ãªãã€åŸæœ¬ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦å°‘ã—å¤‰ãˆã‚‹ã¨ãã«ä½¿ã†ã€‚

```java
PrototypeManager pm = new PrototypeManager();
ConcretePrototype cp1 = new ConcretePrototype();

pm.addCopy("1", cp1);
Prototype clone1 = pm.getCopy("1");

class PrototypeManager {
    private Prototype[] map;

    private void addCopy(String id, Prototype obj) {
        map.put(id, obj)
    }

    private Prototype getCopy(String id) {
        Prototype obj = map.get(id);
        return obj.copyCreate();
    }
}

class ConcretePrototype {
    private Prototype copyCreate() {
        Prototype obj = return obj;
    }
}
```

## Factory Method

Productã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒäº‹å‰ã«æ±ºã¾ã‚‰ãšã€å‹•çš„ã«å¤‰æ›´ã—ãŸã„å ´åˆãªã©ã«ä½¿ç”¨ã€‚

```java
Creator creator = new ConcreteCreator();
Product product = creator.factory();

product.method1();
product.method2();

class ConcreteCreator {
    private Product factory() {
        return new ConcreteProduct();
    }
}

class ConcreteProduct extends Product {
    private void method1()
    private void method2()
}
```

## Adapter

ç•°ãªã‚‹2ã¤ã®ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å¤‰æ›ã—ã¦ç¹‹ã’ã‚‹ã€‚

ä¾‹
- TargetãŒã™ã§ã«å®Ÿç¸¾ãŒã‚ã‚‹å ´åˆ
- å¤šæ•°ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«åˆ©ç”¨ã•ã‚Œã¦ãŠã‚Šå¤‰æ›´ã™ã‚‹ãƒªã‚¹ã‚¯ãŒé«˜ã„å ´åˆ

```java
Target target = new Adapter();
target.method1();

abstract class Target {
    abstract method1();
}

class Adapter extends Target {
    private Adaptee adaptee;

    Adapter() {
        adaptee = new Adaptee();
    }

    // method1ã‚’å‘¼ã¶ã“ã¨ã§adapteeã®methodAãŒå‘¼ã°ã‚Œã‚‹
    method1() {
        adaptee.methodA();
    }
}

class Adaptee {
    methodA() {}
}
```

## Bridge

æ©Ÿèƒ½ã‚¯ãƒ©ã‚¹ã¨å®Ÿè£…ã‚¯ãƒ©ã‚¹ã‚’åˆ†é›¢ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯æ©Ÿèƒ½ã‚¯ãƒ©ã‚¹ã ã‘ã‚’æ“ä½œã™ã‚‹

```java
Abstraction abstraction;
RefinedAbstraction refinedAbstraction;

abstraction = new Abstraction(new ConcreteImplementor());
refinedAbstraction = new RefinedAbstraction(new ConcreteImplementor());

abstraction.method();
refinedAbstraction.method();
refinedAbstraction.method1();

class Abstraction {
    Implementor imp;

    Abstraction() {
        this.imp = imp;
    }

    method() {
        imp.method2();
    }
}

class RefinedAbstraction extends Abstraction {
    RefinedAbstraction(Implementor imp) {
        super(imp);
    }

    method1() {
        imp.method2();
    }
}

class Implementor {
    Abstract method2();
}

class ConcreteImplementor extends Implementor {
    method2() {}
}
```

## Composite

æœ¨æ§‹é€ ãƒ¢ãƒ‡ãƒ«ã‚’1ã¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦æ“ä½œã™ã‚‹

```java
Component directory1 = new Composite();
Component directory2 = new Composite();
Component file1 = new Composite();
Component file2 = new Composite();

// æœ¨æ§‹é€ ã‚’ä½œã‚‹
directory1.add(directory2);
directory1.add(file1);
directory2.add(file2);

// ãƒ«ãƒ¼ãƒˆã‹ã‚‰å­è¦ç´ ã«å†å¸°çš„ã«operationã‚’å®Ÿè¡Œ
directory1.operation();

class Composite {
    Component[] members;

    add(Component c) {
        members.push(c);
    }

    // ãƒ¡ãƒ³ãƒãƒ¼è¦ç´ ã«å†å¸°çš„ã«operationã‚’å®Ÿè¡Œ
    operation() {
        int i = 0;
        while(i < members.length>) {
            members[i].operation();
            i++;
        }
    }
}

class Leaf() {
    operation() {}
}
```

## Decorator

ç¶™æ‰¿æ©Ÿèƒ½ã‚’ä½¿ã‚ãšã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã‹ã¶ã›ã¦å‹•çš„ã«æ©Ÿèƒ½æ‹¡å¼µã‚’ã™ã‚‹ã€‚  
Pythonã®ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãŒæœ‰åã€‚

```java
Component component1 = new ConcreteComponent();
Component decorator1 = new ConcreteComponent();

decorator1.setComponent(component1);

decorator1.method1();

class Decorator {
    Component component;

    setComponent(Component c) {
        component = c;
    }

    method1() {}
}

class ConcreteDecorator extends Decorator {
    method1() {
        // æ‹¡å¼µå‡¦ç†ãŒå…¥ã‚‹
        component.method1();
        // æ‹¡å¼µå‡¦ç†ãŒå…¥ã‚‹
    }
}

class ConcreteComponent {
    method1() {}
}
```


## Facade

çª“å£ã¨ãªã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã£ã¦åˆ©ä¾¿æ€§ã‚’å‘ä¸Šã€‚

```java
// facadeãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã¶ã ã‘ã§ç´°ã‹ãªæ“ä½œã‚’è€ƒãˆãªãã¦ã‚ˆã„
facademethod1();

class Facade {
    // å†…éƒ¨ã§ã¯å°‘ã—è¾¼ã¿å…¥ã£ãŸå‡¦ç†ã‚’ã—ã¦ã„ã‚‹
    facademethod1() {
        classE.methodE();
        classC.methodC();
    }
}
```

## Flyweight

è©²å½“ã™ã‚‹æ—¢å­˜ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒã‚ã‚Œã°ãã‚Œã‚’å…±ç”¨ã™ã‚‹ã€‚  
åŒã˜ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’é‡è¤‡ç”Ÿæˆã—ãªã„ã‚ˆã†å†åˆ©ç”¨ã™ã‚‹ã€‚

```java
FlyweightFactory factory;
factory = FlyweightFactory.getInstance();

Flyweight flyweight = factory.getFlyweight(id);
flyweight.method1();

class FlyweightFactory {
    private Map pool;

    FlyweightFactory singleton;

    static FlyweightFactory getInstance() {
        if (singelton == null) singleton = new FlyweightFactory();
        return singelton;
    }

    Flyweight getFlyweight(int id) {
        Flyweight flyweight;
        if (!pool.get(id)) {
            flyweight = new Flyweight(id);
            pool[id] = flyweight;
        }
        return pool.get(flyweight);
    }
}

class Flyweight {
    flyweight(id) {
        // è­˜åˆ¥å­ã‚’ã¤ã‘ã‚‹
    }

    method1(){}
}
```

## Proxy

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨å¯¾è±¡ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®é–“ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’é…ç½®ã—ã€å¯¾è±¡ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä»£ç†ã¨ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã‚„ã‚Šå–ã‚Šã‚’è¡Œã†ã€‚  
ãƒ¡ãƒ¢ãƒªã®ç¯€ç´„ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®åŠ¹ç‡åŒ–ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å‘ä¸Šã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®çµåˆåº¦ã‚’ç·©ã‚ã‚‹ã“ã¨ãªã©ãŒç‹™ã„ã€‚  
Decoratorãƒ‘ã‚¿ãƒ¼ãƒ³ã«ä¼¼ã¦ã„ã‚‹ãŒã€æ©Ÿèƒ½æ‹¡å¼µã§ã¯ãªãåŠ¹ç‡çš„ãªé‹ç”¨ã‚’ç›®çš„ã¨ã™ã‚‹ç‚¹ãŒç•°ãªã‚‹ã€‚

```java
Subject subject = new Proxy();
subject.method1();
subject.method2();
subject.method3();

class Proxy {
    RealSubject realsubject;

    method1() {
        // ã“ã®æ™‚ç‚¹ã§ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒä¸è¦ãªå ´åˆã€RealSubjectã«ã‚¢ã‚¯ã‚»ã‚¹ã›ãšã“ã“ã§å‡¦ç†
        if (realsubject) {
            realsubject.method1();
        }
    }
}

class RealSubject {
    method1() {
        // å‡¦ç†
    }
}
```

## Iterator

ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®é›†åˆã®ç¨®é¡ã«ä¾å­˜ã›ãšçµ±ä¸€çš„æ‰‹é †ã§ã‚¢ã‚¯ã‚»ã‚¹ã‚’å¯èƒ½ã«ã™ã‚‹

```java

Aggregate aggregate = new ConcreteAggregate();
Item item1 = new Item();
Item item2 = new Item();

aggregate.addItem(item1);
aggregate.addItem(item2);

Iterator iterator = aggregate.iterator();

while(iterator.hasNext()) {
    Item item = iterator.next();
    /// å‡¦ç†
}

class ConcreteAggregate {
    private Item[] items;

    Iterator iterator() {
        return new ConcreteIterator(this);
    }

    addItem(Item item) {
        items.add(item);
    }

    Item getItem(int index) {
        return items.get(index);
    }

    int getSize() {
        return items.size();
    }
}

class ConcreteIterator {
    ConcreteAggregate aggregate;
    int index;

    ConcreteIterator(ConcreteAggregate ag) {
        aggregate = ag;
    }

    Bool hasNext() {
        if (index < aggregate.getSize()) {
            return true;
        }
        return false;
    }

    Object next() {
        return aggregate.getItem(++index);
    }
}
```

## Command

ä¸€é€£ã®å‡¦ç†éƒ¡ï¼ˆå‰å¾Œå‡¦ç†ã€è¨­å®šã€å®Ÿè¡Œï¼‰ã‚’1ã¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¾ã¨ã‚ã¦å¤–éƒ¨åŒ–ã—ã€ãƒã‚¯ãƒ­ã‚’å‘¼ã³å‡ºã™æ„Ÿè¦šã§ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚
ã‚¤ãƒ™ãƒ³ãƒˆç™ºç”Ÿæ™‚ã«å‘¼ã³å‡ºã™ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã—ã¦åˆ©ç”¨ã—ãŸã„å ´åˆã€è¤‡æ•°ã®ã‚³ãƒãƒ³ãƒ‰ã®ç™ºè¡Œæ‰‹é †ãŒç´°ã‹ãæ±ºã‚ã‚‰ã‚Œã¦ã„ã‚‹å ´åˆã€ã‚³ãƒãƒ³ãƒ‰ã®å–ã‚Šæ¶ˆã—ã‚„ä¿å­˜æ©Ÿèƒ½ã‚’æŒãŸã›ãŸã„å ´åˆã«ä½¿ã†ã€‚

```java
Reciver receiver = new ConcreteReceiver();
Invoker invoker = new Invoker();

// ã‚³ãƒãƒ³ãƒ‰ãŒè¤‡æ•°ã‚ã‚‹å ´åˆã¯ãã‚Œãã‚Œç™»éŒ²ãŒå¿…è¦ã«ãªã‚‹
Command cmd = new ConcreteCommand();
cmd.setReceiver(receiver);
invoker.addCommand(cmd);

invoker.execute();

class Invoker {
    Command[] commands;

    addCommand(Command cmd) {
        commands.push(cmd);
    }

    undoCommand() {
        Command command = commands.pop();
    }

    execute() {
        while(commands.hasNext()) {
            commands.next().execute();
        }
    }
}

class ConcreteCommand {
    Recevier receiver;

    setRecevier(Receiver receiver) {
        this.receiver = receiver;
    }

    execute() {
        receiver.action();
    }
}

class ConcreteReceiver {
    action() {
        // å®Ÿè¡Œå‡¦ç†
    }
}
```

